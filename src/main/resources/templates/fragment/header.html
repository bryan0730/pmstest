<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<th:block th:fragment="headerFragment">
    <nav class="sb-topnav navbar navbar-expand navbar-dark bg-dark" th:fragment="headerFragment">
        <!-- Navbar Brand-->
        <a class="navbar-brand ps-3" th:href="@{/pms/board}">PMS</a>
        <!-- Sidebar Toggle-->
        <button class="btn btn-link btn-sm order-1 order-lg-0 me-4 me-lg-0" id="sidebarToggle" href="#!"><svg class="svg-inline--fa fa-bars" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="bars" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"></path></svg><!-- <i class="fas fa-bars"></i> Font Awesome fontawesome.com --></button>
        <!-- Navbar Search-->

        <div class="gnb">
            <ul>
                <li><a href="#">공지게시판</a></li>
                <li><a href="#">업무게시판</a></li>
                <li><a th:href="@{/pms/message/receive}">메시지</a></li>
                <th:block th:if="${session.role=='관리자'}">
                    <li><a th:href="@{/admin/organization}">환경설정</a></li>
                </th:block>
            </ul>
        </div>

        <!-- Navbar-->
        <ul class="navbar-nav ms-auto ms-md-0 me-3 me-lg-4">
            <li class="nav-item dropdown">
                <div class="alarm-wrap">
                    <a class="nav-link" role="button" aria-expanded="false">
                        <img th:src="@{/img/alarm2.png}">
                        <input type="hidden" id="unreadCount" th:value="${unreadMsgCount}">
                        <div class="circle-wrapper" style="display: none">
                            <div class="red-circle"></div>
                        </div>
                    </a>
                    <div class="message_modal_cover has_bubble nav-modal-cover">
                        <div class="message-modal">
                            <div class="header-content unchecked-cnt">읽지 않은 알림 <span class="num" th:text="${unreadMsgCount}">0</span>개</div>
                            <div class="list-content">
                                <div th:each="msg, stat : ${messageList}">
                                    <div class="infd-message-cover checked" th:classappend="${msg.messageState == '1'} ? 'unread' : ''">
                                        <a href="#" class="infd-message-el">
                                            <span class="title text-truncate" th:text="${msg.messageContent}">[업데이트 소식] 10월 4주차 - 주간 학습 현황 카드 업데이트</span> <span class="date" th:text="${msg.messageSender}"></span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                            <div class="button-content">
                                <a href="/messages">더 많은 알람 보기</a>
                            </div>
                        </div>
                    </div>
                </div>
            </li>

            <div class="name-box">
                <input type="hidden" id="pmsUserId" th:value="${session.id}">
                <div>
                    <span id="pmsUserInfoName" th:text="${session.username}">사용자명</span>
                </div>
                <form th:action="@{/logout}" method="post">
                    <button type="submit" class="btn btn-secondary btn-sm">logout</button>
                </form>
            </div>
        </ul>
    </nav>
</th:block>
</html>